!function(c){var l="glxtmModal",a={type:"html",content:"",url:"",ajax:{},ajaxRequest:null,closeOnEsc:!0,closeOnOverlayClick:!0,clone:!1,overlay:{block:void 0,tpl:'<div class="'+l+'-overlay"></div>',css:{backgroundColor:"#000",opacity:.6,zIndex:1e5}},container:{block:void 0,tpl:'<div class="'+l+'-container"><div class="'+l+'-container_i"><div class="'+l+'-container_i2"></div></div></div>'},preloader:{verticalAlign:void 0,tpl:'<div class="'+l+'-preloader" />'},wrap:void 0,body:void 0,errors:{tpl:'<div class="'+l+"-error "+l+'-close"></div>',autocloseDelay:2e3,ajaxUnsuccessfulLoad:"Error"},openEffect:{type:"fade",speed:400},closeEffect:{type:"fade",speed:400},width:"auto",verticalAlign:"middle",beforeOpen:c.noop,afterOpen:c.noop,beforeClose:c.noop,afterClose:c.noop,afterLoading:c.noop,afterLoadingOnShow:c.noop,errorLoading:c.noop},s=0,d=c([]),f=function(e,a){var n=!0;return c(e).each(function(){c(a.target).get(0)==c(this).get(0)&&(n=!1),0==c(a.target).closest("HTML",c(this).get(0)).length&&(n=!1)}),n},o={getParentEl:function(e){var a=c(e);return a.data(l)?a:(a=c(e).closest("."+l+"-container").data(l+"ParentEl"))||!1},transition:function(e,a,n,t){switch(t=null==t?c.noop:t,n.type){case"fade":"show"==a?e.fadeIn(n.speed,t):e.fadeOut(n.speed,t);break;case"none":"show"==a?e.show():e.hide(),t()}},setWrapMarginRight:function(e,a){e.wrap.css("marginRight",a+"px"),c(document).trigger(l+"_setWrapMarginRight",a)},initEl:function(a,e){var n=a.data(l);if(!n){if(s++,(n=e).modalID=s,n.overlay.block=c(n.overlay.tpl),n.overlay.block.css(n.overlay.css),n.container.block=c(n.container.tpl),n.body=c("."+l+"-container_i2",n.container.block),e.clone?n.body.html(a.clone(!0)):(a.before('<div id="'+l+"Reserve"+n.modalID+'" style="display: none" />'),n.body.html(a)),n.body.on("click","."+l+"-close",function(){return a[l]("close"),!1}),n.closeOnOverlayClick&&n.overlay.block.add(n.container.block).click(function(e){f(c(">*",n.body),e)&&a[l]("close")}),n.container.block.data(l+"ParentEl",a),a.data(l,n),d=c.merge(d,a),c.proxy(p.show,a)(),"html"==n.type)return a;if(null!=n.ajax.beforeSend){var t=n.ajax.beforeSend;delete n.ajax.beforeSend}if(null!=n.ajax.success){var o=n.ajax.success;delete n.ajax.success}if(null!=n.ajax.error){var i=n.ajax.error;delete n.ajax.error}var r=c.extend(!0,{url:n.url,beforeSend:function(){n.body.html(n.preloader.tpl).css("verticalAlign",void 0===n.preloader.verticalAlign?n.verticalAlign:n.preloader.verticalAlign),void 0!==t&&t(n,a)},success:function(e){a.trigger("afterLoading."+l),e=n.afterLoading(n,a,e)||e,n.body.css("verticalAlign",n.verticalAlign),null==o?n.body.html(e):o(n,a,e),a.trigger("afterLoadingOnShow."+l),n.afterLoadingOnShow(n,a,e)},error:function(){a.trigger("errorLoading."+l),n.errorLoading(n,a),null==i?(n.body.html(n.errors.tpl),c("."+l+"-error",n.body).html(n.errors.ajaxUnsuccessfulLoad),c("."+l+"-close",n.body).click(function(){return a[l]("close"),!1}),n.errors.autocloseDelay&&setTimeout(function(){a[l]("close")},n.errors.autocloseDelay)):i(n,a)}},n.ajax);n.ajaxRequest=c.ajax(r),a.data(l,n)}},init:function(e){return e=c.extend(!0,{},a,e),c.isFunction(this)?null==e?void c.error(l+": Uncorrect parameters"):""!=e.url?(e.type="ajax",o.initEl(c("<div />"),e)):""!=e.content?(e.type="html",o.initEl(c(e.content),e)):void c.error(l+': Set parameter "url" or "content"'):this.each(function(){o.initEl(c(this),c.extend(!0,{},e))})}},p={show:function(){var e=o.getParentEl(this);if(!1!==e){var a=e.data(l);if(a.overlay.block.hide(),a.container.block.hide(),c("BODY").append(a.overlay.block),c("BODY").append(a.container.block),a.container.block.css("zIndex",a.overlay.block.css("zIndex")),a.beforeOpen(a,e),e.trigger("beforeOpen."+l),"hidden"!=a.wrap.css("overflow-y")){a.wrap.data(l+"Overflow",a.wrap.css("overflow-y"));var n=a.wrap.outerWidth(!0);a.wrap.css("overflow-y","hidden");var t=a.wrap.outerWidth(!0);t!=n&&o.setWrapMarginRight(a,t-n)}return d.not(e).each(function(){c(this).data(l).overlay.block.hide()}),a.body.css("verticalAlign",a.verticalAlign),a.body.parent().css("width",a.width),o.transition(a.overlay.block,"show",1<d.length?{type:"none"}:a.openEffect),o.transition(a.container.block,"show",1<d.length?{type:"none"}:a.openEffect,function(){a.afterOpen(a,e),e.trigger("afterOpen."+l)}),e}c.error(l+": Uncorrect call")},close:function(){if(!c.isFunction(this))return this.each(function(){var e=o.getParentEl(this);if(!1!==e){var a=e.data(l);!1!==a.beforeClose(a,e)&&(e.trigger("beforeClose."+l),d.not(e).last().each(function(){c(this).data(l).overlay.block.show()}),o.transition(a.overlay.block,"hide",1<d.length?{type:"none"}:a.closeEffect),o.transition(a.container.block,"hide",1<d.length?{type:"none"}:a.closeEffect,function(){a.afterClose(a,e),e.trigger("afterClose."+l),a.clone||c("#"+l+"Reserve"+a.modalID).replaceWith(a.body.find(">*")),a.overlay.block.remove(),a.container.block.remove(),e.data(l,null),c("."+l+"-container").length||(a.wrap.data(l+"Overflow")&&a.wrap.css("overflow-y",a.wrap.data(l+"Overflow")),o.setWrapMarginRight(a,0))}),"ajax"==a.type&&a.ajaxRequest.abort(),d=d.not(e))}else c.error(l+": Uncorrect call")});d.each(function(){c(this)[l]("close")})},getActive:function(){var e=c("."+l+"-container").last();return!!e.length&&e.data(l+"ParentEl").data(l)},setDefault:function(e){c.extend(!0,a,e)}};c(function(){a.wrap=c(document.all&&!document.querySelector?"html":"body")}),c(document).bind("keyup."+l,function(e){var a=d.last();a.length&&a.data(l).closeOnEsc&&27===e.keyCode&&a[l]("close")}),c[l]=c.fn[l]=function(e){return p[e]?p[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void c.error(l+": Method "+e+" does not exist"):o.init.apply(this,arguments)}}(jQuery),function(t){var o="glxtmAjaxForm",a={afterInit:t.noop,beforeSend:t.noop,success:t.noop,error:function(){alert("Failed to execute the query. Reload the page and try again.")},b:{}},i={isForm:function(e){return"form"==e.get(0).tagName.toLowerCase()},makeData:function(e){return i.isForm(e)?e.serialize():(a=e.clone().wrap("<form/>"),e.find("select").each(function(e){a.find("select").eq(e).val(t(this).val())}),a.serialize());var a},submit:function(e,a){t.ajax({type:"POST",cache:!1,data:i.makeData(e),url:i.isForm(e)?e.attr("action"):e.data("action"),beforeSend:function(){a.beforeSend(a,e)},success:function(e){a.b.container.html(e),a.success(a)},error:function(){a.error(a,e)}})},initContainer:function(e,a){var n=e.data(o);n||(n=a,e.data(o,n),(n.b.container=e).on("submit","[data-ajax-form]",function(){return i.submit(t(this),n),!1}),n.afterInit(n))},init:function(e){return e=t.extend(!0,{},a,e),t.isFunction(this)?(t.error(o+": Uncorrect call"),!1):this.each(function(){i.initContainer(t(this),t.extend(!0,{},e))})}},n={setDefault:function(e){t.extend(!0,a,e)}};t[o]=t.fn[o]=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(t.error(o+": Method "+e+" does not exist"),!1):i.init.apply(this,arguments)}}(jQuery),function(a){var n="glxtmPreloader";a.fn[n+"Show"]=function(){var e=a(this);e.addClass(n+"Wrapper"),e.append('<div class="'+n+'Overlay"><div class="glxtmDarkSpinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>')},a.fn[n+"Hide"]=function(){var e=a(this);e.removeClass(n+"Wrapper"),e.find("."+n+"Overlay").remove()}}(jQuery),function(o){o(function(){var e=o(".glxtmManage"),t=e.find(".glxtmManage_area"),n=t.find(".glxtmManage_items");n.sortable({handle:".glxtmManage_item_sortHandle",axis:"y",revert:200,connectWith:".glxtmManage_items",stop:function(){var a=[];t.each(function(){var e=o(this).data("id");o(this).find(".glxtmManage_item").each(function(){a.push(o(this).data("id")+","+e)})}),o.ajax({url:glxtmMain.ajaxUrl,method:"POST",data:{action:"glxtm_sort",data:a}})}}),e.find(".glxtmManage_add .button").click(function(){o.glxtmModal({url:glxtmMain.ajaxUrl,closeOnOverlayClick:!1,ajax:{data:{action:"glxtm_add_item",areaId:o(this).closest(".glxtmManage_area").data("id")}},afterLoadingOnShow:function(e){e.body.glxtmAjaxForm({afterInit:function(e){e.b.container.find('INPUT[type="text"]').focus()},beforeSend:function(e){e.b.container.find(".glxtmModalBox").glxtmPreloaderShow()},success:function(e){e.b.container.find(".glxtmModalBox").length||e.b.container.glxtmModal("close")}})}})}),o(document).on("glxtmItemCreated",function(e,a){var n=t.filter('[data-id="'+a.areaId+'"]').find(".glxtmManage_items");n.length&&n.append(a.html)}),n.on("click",".glxtmManage_item_edit",function(){o.glxtmModal({url:glxtmMain.ajaxUrl,closeOnOverlayClick:!1,ajax:{data:{action:"glxtm_edit_item",id:o(this).closest(".glxtmManage_item").data("id")}},afterLoadingOnShow:function(e){e.body.glxtmAjaxForm({afterInit:function(e){e.b.container.find('INPUT[type="text"]').focus()},beforeSend:function(e){e.b.container.find(".glxtmModalBox").glxtmPreloaderShow()},success:function(e){e.b.container.find(".glxtmModalBox").length||e.b.container.glxtmModal("close")}})}})}),o(document).on("glxtmItemUpdated",function(e,a){n.find('.glxtmManage_item[data-id="'+a.id+'"]').replaceWith(a.html)}),n.on("click",".glxtmManage_item_disable,.glxtmManage_item_enable",function(){var a=o(this).closest(".glxtmManage_item"),n=a.closest(".glxtmManage_area");o.ajax({url:glxtmMain.ajaxUrl,data:{action:"glxtm_"+(o(this).hasClass("glxtmManage_item_disable")?"disable":"enable")+"_item",id:a.data("id")},beforeSend:function(){n.glxtmPreloaderShow()},success:function(e){a.replaceWith(e),n.glxtmPreloaderHide()}})}),n.on("click",".glxtmManage_item_delete",function(){o.glxtmModal({url:glxtmMain.ajaxUrl,closeOnOverlayClick:!1,ajax:{data:{action:"glxtm_delete_item",id:o(this).closest(".glxtmManage_item").data("id")}},afterLoadingOnShow:function(e){e.body.glxtmAjaxForm({beforeSend:function(e){e.b.container.find(".glxtmModalBox").glxtmPreloaderShow()},success:function(e){e.b.container.find(".glxtmModalBox").length||e.b.container.glxtmModal("close")}})}})}),n.on("click",".glxtmManage_deletedItem_hide",function(){o(this).closest(".glxtmManage_deletedItem").animate({opacity:0,height:0,paddingTop:0,paddingBottom:0},{complete:function(){o(this).remove()}})}),o(document).on("glxtmItemDeleted",function(e,a){n.find('.glxtmManage_item[data-id="'+a.id+'"]').replaceWith(a.html)})}),o(function(){var e=o(".glxtmRate");e.length&&e.on("click",".button",function(){o.ajax({url:glxtmMain.ajaxUrl,method:"POST",data:{action:o(this).data("action")},beforeSend:function(){e.glxtmPreloaderShow()},success:function(){e.remove()}})})})}(jQuery),function(a){a(function(){var e=a(".glxtmWelcome");e.length&&e.find(".glxtmWelcome_hide").click(function(){a.ajax({url:glxtmMain.ajaxUrl,method:"POST",data:{action:"glxtm_welcome_hide"},beforeSend:function(){e.glxtmPreloaderShow()},success:function(){e.remove()}})})})}(jQuery);